import yfinance as yf
import matplotlib.pyplot as plt
from datetime import datetime, timedelta
import pandas as pd
import os
import sqlite3 as sl

import stockbuyer
import stockfinder

# Very incomplete simulator

def simulator(conn):
    simulator_sqlite(5, 0, 3000, [], conn)

def simulator_sqlite(DAYSBEHIND, DAYEND, CASH, OWNED, con):
    DAYSBEHIND = DAYSBEHIND + 220
    DAYEND = DAYEND + 220

    with con: 
        con.execute("DROP TABLE IF EXISTS PORTFOLIO")
        con.execute("""CREATE TABLE PORTFOLIO(tick TEXT, price REAL, quantity INTEGER);""")

    i = DAYSBEHIND
    while i > DAYEND:
        print("Cash " + str(CASH) + " Days left - " + str(i))
        viable = stockfinder.identifyStocks(con)
        for tickdata in viable:
            price = tickdata[1]
            if CASH >= price:
                stockbuyer.sql_buy(con, tickdata, price)
                CASH = CASH - price
            else:
                sold = stockbuyer.sql_sell(con)
                CASH = CASH + sold
        i = i - 1


if __name__ == "__main__":
    simulator()

# Simulation - March 24, 2022 8:15

# chrisridenour@Chriss-Air LossLeader % python3 main.py     
# Database connected successfully...
# Cash 3000
# ABMD: No data found for this date range, symbol may be delisted
# IdentifyStocks connected successfully.                
# Cash 1834.5
# ABMD: No data found for this date range, symbol may be delisted
# IdentifyStocks connected successfully.                
# Cash 669.0
# ABMD: No data found for this date range, symbol may be delisted
# IdentifyStocks connected successfully.                
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# Cash 23.039989471435547
# ABMD: No data found for this date range, symbol may be delisted
# IdentifyStocks connected successfully.                
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 3)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# Cash 0.5899887084960938
# ABMD: No data found for this date range, symbol may be delisted
# IdentifyStocks connected successfully.                
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0
# 97.80999755859375algorithm later...
# 114.22000122070312
# 22.450000762939453
# 135.07000732421875
# 276.4100036621094
# 117.94999694824219
# 105.33999633789062
# 51.11000061035156
# 108.66999816894531
# 87.52999877929688
# 48.939998626708984

#  Finish current, start portfolio
# ('ABT', 97.80999755859376, 3)
# ('AAP', 114.22000122070312, 3)
# ('AES', 22.450000762939453, 4)
# ('A', 135.07000732421875, 3)
# ('APD', 276.4100036621094, 3)
# ('ARE', 117.9499969482422, 2)
# ('ALLE', 105.33999633789062, 2)
# ('LNT', 51.11000061035156, 2)
# ('ALL', 108.66999816894533, 2)
# ('AEP', 87.52999877929688, 2)
# ('AIG', 48.939998626708984, 2)

#  Finish portfolio
# Max diff 0